{{ define "main" }}
<main class="site-container">
  {{ $allPages := .Site.RegularPages.ByDate.Reverse }}

  {{/* Hero: latest post */}}
  {{ with index (first 1 $allPages) 0 }}
  <a href="{{ .RelPermalink }}" class="hero-card">
    {{ $img := .Resources.GetMatch "*.{jpg,jpeg,png,webp}" }}
    {{ with $img }}
      <img src="{{ (.Fill "1200x514").RelPermalink }}" alt="" class="hero-image">
    {{ else }}
      <div class="hero-image" style="background:linear-gradient(135deg,#e0e7ff 0%,#c7d2fe 100%);"></div>
    {{ end }}
    <div class="hero-body">
      <span class="hero-meta">{{ .Params.segment }} 路 {{ .Date.Format "2. January 2006" }}</span>
      <h2 class="hero-title">{{ .Title }}</h2>
      {{ with .Summary }}<p class="hero-excerpt">{{ . }}</p>{{ end }}
    </div>
  </a>
  {{ end }}

  {{/* Segments */}}
  <section class="home-section">
    <h2 class="section-heading">Segmente</h2>
    <div class="segment-grid">
      <a href="{{ "politik/" | relURL }}" class="segment-card">
        <p class="segment-card-title">Politik</p>
        <p class="segment-card-desc">Analysen, Dossiers, Timeline-Eintr盲ge.</p>
      </a>
      <a href="{{ "technik/" | relURL }}" class="segment-card">
        <p class="segment-card-title">Technik</p>
        <p class="segment-card-desc">Notizen, Tools, Architekturentscheidungen.</p>
      </a>
      <a href="{{ "reisen/" | relURL }}" class="segment-card">
        <p class="segment-card-title">Reisen</p>
        <p class="segment-card-desc">Trips, Galerie-Posts und Beobachtungen.</p>
      </a>
    </div>
  </section>

  {{/* Recent posts (skip the hero) */}}
  {{ $rest := after 1 $allPages }}
  {{ if $rest }}
  <section class="home-section">
    <h2 class="section-heading">Neueste Beitr盲ge</h2>
    <div class="article-grid">
      {{ range first 9 $rest }}
        <a href="{{ .RelPermalink }}" class="article-card">
          {{ $img := .Resources.GetMatch "*.{jpg,jpeg,png,webp}" }}
          {{ with $img }}
            <img src="{{ (.Fill "600x340").RelPermalink }}" alt="" class="card-image">
          {{ else }}
            <div class="card-image-placeholder"></div>
          {{ end }}
          <div class="card-body">
            <span class="card-meta">{{ .Params.segment }} 路 {{ .Date.Format "2. Jan 2006" }}{{ if eq .Params.status "seedling" }} 路 {{ end }}</span>
            <h3 class="card-title">{{ .Title }}</h3>
          </div>
        </a>
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Dossiers */}}
  {{ $dossiers := where .Site.RegularPages "Params.type" "dossier" }}
  {{ if $dossiers }}
  <section class="home-section">
    <h2 class="section-heading">Dossiers</h2>
    <div class="article-grid">
      {{ range $dossiers }}
        <a href="{{ .RelPermalink }}" class="article-card">
          {{ $img := .Resources.GetMatch "*.{jpg,jpeg,png,webp}" }}
          {{ with $img }}
            <img src="{{ (.Fill "600x340").RelPermalink }}" alt="" class="card-image">
          {{ else }}
            <div class="card-image-placeholder"></div>
          {{ end }}
          <div class="card-body">
            <span class="card-meta">{{ .Params.segment }} 路 {{ .Date.Format "2. Jan 2006" }}</span>
            <h3 class="card-title">{{ .Title }}</h3>
          </div>
        </a>
      {{ end }}
    </div>
  </section>
  {{ end }}
</main>
{{ end }}
